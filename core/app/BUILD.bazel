load("@io_bazel_rules_go//go:def.bzl", "go_library")
load("//:version.bzl", "gapid_version")

go_library(
    name = "go_default_library",
    srcs = [
        "atexit.go",
        "default_version.go",
        "doc.go",
        "flags.go",
        "help.go",
        "log.go",
        "oncrash.go",
        "profile.go",
        "run.go",
        "verbs.go",
    ],
    importpath = "github.com/google/gapid/core/app",
    visibility = ["//visibility:public"],
    deps = [
        "//core/app/analytics:go_default_library",
        "//core/app/crash:go_default_library",
        "//core/app/crash/reporting:go_default_library",
        "//core/app/flags:go_default_library",
        "//core/event/task:go_default_library",
        "//core/fault:go_default_library",
        "//core/fault/stacktrace:go_default_library",
        "//core/fault/stacktrace/crunch:go_default_library",
        "//core/log:go_default_library",
        "//core/os/file:go_default_library",
        "@com_github_pkg_errors//:go_default_library",
    ],
)

gapid_version(
    name = "version",
    out = "default_version.go",
    template = "default_version.go.in",
)
