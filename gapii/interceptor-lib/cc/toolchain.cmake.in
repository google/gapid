# Copyright (C) 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

if (NOT "@ANDROID_ABI@" STREQUAL "")
  set(ANDROID ON CACHE INTERNAL "Target system was of type Android")
  set(CMAKE_SYSTEM_NAME Linux)

  set(CMAKE_FIND_ROOT_PATH      "@CMAKE_FIND_ROOT_PATH@"      CACHE STRING "Find root path")
  set(CMAKE_LINKER              "@CMAKE_LINKER@"              CACHE STRING "Linker")
  set(CMAKE_PREFIX_PATH         "@CMAKE_PREFIX_PATH@"         CACHE STRING "Prefix path")

  set(CMAKE_SYSROOT "@CMAKE_SYSROOT@" CACHE STRING "Sysroot")

  # The following are all assigned by {ndk}/build/cmake/android.toolchain.cmake and need to be propagated.
  set(CMAKE_ANDROID_ARCH_ABI                 "@CMAKE_ANDROID_ARCH_ABI@"                 CACHE STRING "CMAKE_ANDROID_ARCH_ABI")
  set(CMAKE_ANDROID_ARM_MODE                 "@CMAKE_ANDROID_ARM_MODE@"                 CACHE STRING "CMAKE_ANDROID_ARM_MODE")
  set(CMAKE_ANDROID_ARM_NEON                 "@CMAKE_ANDROID_ARM_NEON@"                 CACHE STRING "CMAKE_ANDROID_ARM_NEON")
  set(CMAKE_ANDROID_NDK                      "@CMAKE_ANDROID_NDK@"                      CACHE STRING "CMAKE_ANDROID_NDK")
  set(CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION    "@CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION@"    CACHE STRING "CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION")
  set(CMAKE_ANDROID_STL_TYPE                 "@CMAKE_ANDROID_STL_TYPE@"                 CACHE STRING "CMAKE_ANDROID_STL_TYPE")
  set(CMAKE_AR                               "@CMAKE_AR@"                               CACHE STRING "CMAKE_AR")
  set(CMAKE_ASM_COMPILER_EXTERNAL_TOOLCHAIN  "@CMAKE_ASM_COMPILER_EXTERNAL_TOOLCHAIN@"  CACHE STRING "CMAKE_ASM_COMPILER_EXTERNAL_TOOLCHAIN")
  set(CMAKE_ASM_COMPILER_TARGET              "@CMAKE_ASM_COMPILER_TARGET@"              CACHE STRING "CMAKE_ASM_COMPILER_TARGET")
  set(CMAKE_ASM_FLAGS                        "@CMAKE_ASM_FLAGS@"                        CACHE STRING "CMAKE_ASM_FLAGS")
  set(CMAKE_ASM_FLAGS_DEBUG                  "@CMAKE_ASM_FLAGS_DEBUG@"                  CACHE STRING "CMAKE_ASM_FLAGS_DEBUG")
  set(CMAKE_ASM_FLAGS_RELEASE                "@CMAKE_ASM_FLAGS_RELEASE@"                CACHE STRING "CMAKE_ASM_FLAGS_RELEASE")
  set(CMAKE_ASM_NASM_COMPILER                "@CMAKE_ASM_NASM_COMPILER@"                CACHE STRING "CMAKE_ASM_NASM_COMPILER")
  set(CMAKE_ASM_NASM_COMPILER_ARG1           "@CMAKE_ASM_NASM_COMPILER_ARG1@"           CACHE STRING "CMAKE_ASM_NASM_COMPILER_ARG1")
  set(CMAKE_C_COMPILER                       "@CMAKE_C_COMPILER@"                       CACHE STRING "CMAKE_C_COMPILER")
  set(CMAKE_C_COMPILER_EXTERNAL_TOOLCHAIN    "@CMAKE_C_COMPILER_EXTERNAL_TOOLCHAIN@"    CACHE STRING "CMAKE_C_COMPILER_EXTERNAL_TOOLCHAIN")
  set(CMAKE_C_COMPILER_ID                    "@CMAKE_C_COMPILER_ID@"                    CACHE STRING "CMAKE_C_COMPILER_ID")
  set(CMAKE_C_COMPILER_ID_RUN                "@CMAKE_C_COMPILER_ID_RUN@"                CACHE STRING "CMAKE_C_COMPILER_ID_RUN")
  set(CMAKE_C_COMPILER_LAUNCHER              "@CMAKE_C_COMPILER_LAUNCHER@"              CACHE STRING "CMAKE_C_COMPILER_LAUNCHER")
  set(CMAKE_C_COMPILER_TARGET                "@CMAKE_C_COMPILER_TARGET@"                CACHE STRING "CMAKE_C_COMPILER_TARGET")
  set(CMAKE_C_COMPILER_VERSION               "@CMAKE_C_COMPILER_VERSION@"               CACHE STRING "CMAKE_C_COMPILER_VERSION")
  set(CMAKE_C_FLAGS                          "@CMAKE_C_FLAGS@"                          CACHE STRING "CMAKE_C_FLAGS")
  set(CMAKE_C_FLAGS_DEBUG                    "@CMAKE_C_FLAGS_DEBUG@"                    CACHE STRING "CMAKE_C_FLAGS_DEBUG")
  set(CMAKE_C_FLAGS_RELEASE                  "@CMAKE_C_FLAGS_RELEASE@"                  CACHE STRING "CMAKE_C_FLAGS_RELEASE")
  set(CMAKE_C_STANDARD_COMPUTED_DEFAULT      "@CMAKE_C_STANDARD_COMPUTED_DEFAULT@"      CACHE STRING "CMAKE_C_STANDARD_COMPUTED_DEFAULT")
  set(CMAKE_C_STANDARD_LIBRARIES_INIT        "@CMAKE_C_STANDARD_LIBRARIES_INIT@"        CACHE STRING "CMAKE_C_STANDARD_LIBRARIES_INIT")
  set(CMAKE_CXX_COMPILER                     "@CMAKE_CXX_COMPILER@"                     CACHE STRING "CMAKE_CXX_COMPILER")
  set(CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN  "@CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN@"  CACHE STRING "CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN")
  set(CMAKE_CXX_COMPILER_ID                  "@CMAKE_CXX_COMPILER_ID@"                  CACHE STRING "CMAKE_CXX_COMPILER_ID")
  set(CMAKE_CXX_COMPILER_ID_RUN              "@CMAKE_CXX_COMPILER_ID_RUN@"              CACHE STRING "CMAKE_CXX_COMPILER_ID_RUN")
  set(CMAKE_CXX_COMPILER_LAUNCHER            "@CMAKE_CXX_COMPILER_LAUNCHER@"            CACHE STRING "CMAKE_CXX_COMPILER_LAUNCHER")
  set(CMAKE_CXX_COMPILER_TARGET              "@CMAKE_CXX_COMPILER_TARGET@"              CACHE STRING "CMAKE_CXX_COMPILER_TARGET")
  set(CMAKE_CXX_COMPILER_VERSION             "@CMAKE_CXX_COMPILER_VERSION@"             CACHE STRING "CMAKE_CXX_COMPILER_VERSION")
  set(CMAKE_CXX_FLAGS                        "@CMAKE_CXX_FLAGS@"                        CACHE STRING "CMAKE_CXX_FLAGS")
  set(CMAKE_CXX_FLAGS_DEBUG                  "@CMAKE_CXX_FLAGS_DEBUG@"                  CACHE STRING "CMAKE_CXX_FLAGS_DEBUG")
  set(CMAKE_CXX_FLAGS_RELEASE                "@CMAKE_CXX_FLAGS_RELEASE@"                CACHE STRING "CMAKE_CXX_FLAGS_RELEASE")
  set(CMAKE_CXX_STANDARD_COMPUTED_DEFAULT    "@CMAKE_CXX_STANDARD_COMPUTED_DEFAULT@"    CACHE STRING "CMAKE_CXX_STANDARD_COMPUTED_DEFAULT")
  set(CMAKE_CXX_STANDARD_INCLUDE_DIRECTORIES "@CMAKE_CXX_STANDARD_INCLUDE_DIRECTORIES@" CACHE STRING "CMAKE_CXX_STANDARD_INCLUDE_DIRECTORIES")
  set(CMAKE_CXX_STANDARD_LIBRARIES_INIT      "@CMAKE_CXX_STANDARD_LIBRARIES_INIT@"      CACHE STRING "CMAKE_CXX_STANDARD_LIBRARIES_INIT")
  set(CMAKE_EXE_LINKER_FLAGS                 "@CMAKE_EXE_LINKER_FLAGS@"                 CACHE STRING "CMAKE_EXE_LINKER_FLAGS")
  set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE      "@CMAKE_FIND_ROOT_PATH_MODE_INCLUDE@"      CACHE STRING "CMAKE_FIND_ROOT_PATH_MODE_INCLUDE")
  set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY      "@CMAKE_FIND_ROOT_PATH_MODE_LIBRARY@"      CACHE STRING "CMAKE_FIND_ROOT_PATH_MODE_LIBRARY")
  set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE      "@CMAKE_FIND_ROOT_PATH_MODE_PACKAGE@"      CACHE STRING "CMAKE_FIND_ROOT_PATH_MODE_PACKAGE")
  set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM      "@CMAKE_FIND_ROOT_PATH_MODE_PROGRAM@"      CACHE STRING "CMAKE_FIND_ROOT_PATH_MODE_PROGRAM")
  set(CMAKE_MODULE_LINKER_FLAGS              "@CMAKE_MODULE_LINKER_FLAGS@"              CACHE STRING "CMAKE_MODULE_LINKER_FLAGS")
  set(CMAKE_POSITION_INDEPENDENT_CODE        "@CMAKE_POSITION_INDEPENDENT_CODE@"        CACHE STRING "CMAKE_POSITION_INDEPENDENT_CODE")
  set(CMAKE_RANLIB                           "@CMAKE_RANLIB@"                           CACHE STRING "CMAKE_RANLIB")
  set(CMAKE_SHARED_LINKER_FLAGS              "@CMAKE_SHARED_LINKER_FLAGS@"              CACHE STRING "CMAKE_SHARED_LINKER_FLAGS")
  set(CMAKE_SYSTEM_NAME                      "@CMAKE_SYSTEM_NAME@"                      CACHE STRING "CMAKE_SYSTEM_NAME")
  set(CMAKE_SYSTEM_PROCESSOR                 "@CMAKE_SYSTEM_PROCESSOR@"                 CACHE STRING "CMAKE_SYSTEM_PROCESSOR")
  set(CMAKE_SYSTEM_VERSION                   "@CMAKE_SYSTEM_VERSION@"                   CACHE STRING "CMAKE_SYSTEM_VERSION")
  set(CMAKE_TRY_COMPILE_PLATFORM_VARIABLES   "@CMAKE_TRY_COMPILE_PLATFORM_VARIABLES@"   CACHE STRING "CMAKE_TRY_COMPILE_PLATFORM_VARIABLES")
else()
  set(CMAKE_AR                  "@CMAKE_AR@"                  CACHE STRING "Archiver")
  set(CMAKE_CXX_COMPILER        "@CMAKE_CXX_COMPILER@"        CACHE STRING "C++ Compiler")
  set(CMAKE_CXX_FLAGS           "@CMAKE_CXX_FLAGS@"           CACHE STRING "C++ flags")
  set(CMAKE_C_COMPILER          "@CMAKE_C_COMPILER@"          CACHE STRING "C Compiler")
  set(CMAKE_C_FLAGS             "@CMAKE_C_FLAGS@"             CACHE STRING "C++ flags")
  set(CMAKE_EXE_LINKER_FLAGS    "@CMAKE_EXE_LINKER_FLAGS@"    CACHE STRING "Exe linker flags")
  set(CMAKE_FIND_ROOT_PATH      "@CMAKE_FIND_ROOT_PATH@"      CACHE STRING "Find root path")
  set(CMAKE_LINKER              "@CMAKE_LINKER@"              CACHE STRING "Linker")
  set(CMAKE_PREFIX_PATH         "@CMAKE_PREFIX_PATH@"         CACHE STRING "Prefix path")
  set(CMAKE_RANLIB              "@CMAKE_RANLIB@"              CACHE STRING "Ranlib path")
  set(CMAKE_SHARED_LINKER_FLAGS "@CMAKE_SHARED_LINKER_FLAGS@" CACHE STRING "Shared linker flags")

  if(NOT "@CMAKE_SYSROOT@" STREQUAL "")
    set(CMAKE_SYSROOT "@CMAKE_SYSROOT@" CACHE STRING "Sysroot")
  endif()

  set(STL_INCLUDES @STL_INCLUDES@)
  foreach(inc ${STL_INCLUDES})
    include_directories(SYSTEM ${inc})
  endforeach()
  link_libraries(@STL_LIBRARY@)
endif()
